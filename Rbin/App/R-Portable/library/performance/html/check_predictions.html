<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Posterior predictive checks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for check_predictions {performance}"><tr><td>check_predictions {performance}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Posterior predictive checks</h2>

<h3>Description</h3>

<p>Posterior predictive checks mean &quot;simulating replicated data
under the fitted model and then comparing these to the observed data&quot;
(<em>Gelman and Hill, 2007, p. 158</em>). Posterior predictive checks
can be used to &quot;look for systematic discrepancies between real and
simulated data&quot; (<em>Gelman et al. 2014, p. 169</em>).
</p>
<p><strong>performance</strong> provides posterior predictive check methods for a variety
of frequentist models (e.g., <code>lm</code>, <code>merMod</code>, <code>glmmTMB</code>, ...). For Bayesian
models, the model is passed to <code><a href="../../bayesplot/help/pp_check.html">bayesplot::pp_check()</a></code>.
</p>


<h3>Usage</h3>

<pre>
check_predictions(object, ...)

## Default S3 method:
check_predictions(
  object,
  iterations = 50,
  check_range = FALSE,
  re_formula = NULL,
  bandwidth = "nrd",
  type = "density",
  verbose = TRUE,
  ...
)

posterior_predictive_check(object, ...)

check_posterior_predictions(object, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>A statistical model.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Passed down to <code>simulate()</code>.</p>
</td></tr>
<tr valign="top"><td><code>iterations</code></td>
<td>
<p>The number of draws to simulate/bootstrap.</p>
</td></tr>
<tr valign="top"><td><code>check_range</code></td>
<td>
<p>Logical, if <code>TRUE</code>, includes a plot with the minimum
value of the original response against the minimum values of the replicated
responses, and the same for the maximum value. This plot helps judging whether
the variation in the original data is captured by the model or not
(<em>Gelman et al. 2020, pp.163</em>). The minimum and maximum values of <code>y</code> should
be inside the range of the related minimum and maximum values of <code>yrep</code>.</p>
</td></tr>
<tr valign="top"><td><code>re_formula</code></td>
<td>
<p>Formula containing group-level effects (random effects) to
be considered in the simulated data. If <code>NULL</code> (default), condition
on all random effects. If <code>NA</code> or <code>~0</code>, condition on no random
effects. See <code>simulate()</code> in <strong>lme4</strong>.</p>
</td></tr>
<tr valign="top"><td><code>bandwidth</code></td>
<td>
<p>A character string indicating the smoothing bandwidth to
be used. Unlike <code>stats::density()</code>, which used <code>"nrd0"</code> as default, the
default used here is <code>"nrd"</code> (which seems to give more plausible results
for non-Gaussian models). When problems with plotting occur, try to change
to a different value.</p>
</td></tr>
<tr valign="top"><td><code>type</code></td>
<td>
<p>Plot type for the posterior predictive checks plot. Can be <code>"density"</code>,
<code>"discrete_dots"</code>, <code>"discrete_interval"</code> or <code>"discrete_both"</code> (the <code style="white-space: pre;">discrete_*</code>
options are appropriate for models with discrete - binary, integer or ordinal
etc. - outcomes).</p>
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>
<p>Toggle warnings.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An example how posterior predictive checks can also be used for model
comparison is Figure 6 from <em>Gabry et al. 2019, Figure 6</em>.
</p>
<p><br /> <img src="../help/figures/pp_check.png" width="90%" alt="Posterior Predictive Check" /> <br />
The model shown in the right panel (b) can simulate new data that are more
similar to the observed outcome than the model in the left panel (a). Thus,
model (b) is likely to be preferred over model (a).
</p>


<h3>Value</h3>

<p>A data frame of simulated responses and the original response vector.
</p>


<h3>Note</h3>

<p>Every model object that has a <code>simulate()</code>-method should work with
<code>check_predictions()</code>. On R 3.6.0 and higher, if <strong>bayesplot</strong> (or a
package that imports <strong>bayesplot</strong> such as <strong>rstanarm</strong> or <strong>brms</strong>)
is loaded, <code>pp_check()</code> is also available as an alias for <code>check_predictions()</code>.
</p>


<h3>References</h3>


<ul>
<li><p> Gabry, J., Simpson, D., Vehtari, A., Betancourt, M., and Gelman, A. (2019).
Visualization in Bayesian workflow. Journal of the Royal Statistical Society:
Series A (Statistics in Society), 182(2), 389â€“402. https://doi.org/10.1111/rssa.12378
</p>
</li>
<li><p> Gelman, A., and Hill, J. (2007). Data analysis using regression and
multilevel/hierarchical models. Cambridge; New York: Cambridge University Press.
</p>
</li>
<li><p> Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari, A., and
Rubin, D. B. (2014). Bayesian data analysis. (Third edition). CRC Press.
</p>
</li>
<li><p> Gelman, A., Hill, J., and Vehtari, A. (2020). Regression and Other Stories.
Cambridge University Press.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="../../performance/help/simulate_residuals.html">simulate_residuals()</a></code> and <code><a href="../../performance/help/check_residuals.html">check_residuals()</a></code>.
</p>
<p>Other functions to check model assumptions and and assess model quality: 
<code><a href="../../performance/help/check_autocorrelation.html">check_autocorrelation</a>()</code>,
<code><a href="../../performance/help/check_collinearity.html">check_collinearity</a>()</code>,
<code><a href="../../performance/help/check_convergence.html">check_convergence</a>()</code>,
<code><a href="../../performance/help/check_heteroscedasticity.html">check_heteroscedasticity</a>()</code>,
<code><a href="../../performance/help/check_homogeneity.html">check_homogeneity</a>()</code>,
<code><a href="../../performance/help/check_model.html">check_model</a>()</code>,
<code><a href="../../performance/help/check_outliers.html">check_outliers</a>()</code>,
<code><a href="../../performance/help/check_overdispersion.html">check_overdispersion</a>()</code>,
<code><a href="../../performance/help/check_singularity.html">check_singularity</a>()</code>,
<code><a href="../../performance/help/check_zeroinflation.html">check_zeroinflation</a>()</code>
</p>


<h3>Examples</h3>

<pre>

# linear model
model &lt;- lm(mpg ~ disp, data = mtcars)
check_predictions(model)

# discrete/integer outcome
set.seed(99)
d &lt;- iris
d$skewed &lt;- rpois(150, 1)
model &lt;- glm(
  skewed ~ Species + Petal.Length + Petal.Width,
  family = poisson(),
  data = d
)
check_predictions(model, type = "discrete_both")

</pre>

<hr /><div style="text-align: center;">[Package <em>performance</em> version 0.11.0 <a href="00Index.html">Index</a>]</div>
</div></body></html>
