<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: The root class that every class must inherit from</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for Object {R.oo}"><tr><td>Object {R.oo}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>The root class that every class must inherit from</h2>

<h3>Description</h3>

<p>R.oo<br />
<b>Class Object</b><br />
</p>
<p>public class <b>Object</b><br />
</p>
<p><code>Object</code> is the root class of all other classes. All classes
<em>must</em> extends this class, directly or indirectly, which means
that they all will inherit the methods in this class.
</p>


<h3>Usage</h3>

<pre>
Object(core=NA, finalize=TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>core</code></td>
<td>
<p>The core value of each <em>reference</em> referring to the
Object. By default, this is just the smallest possible <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object, but
there are situations where it is useful to have another kind of core,
which is the case with the Class class.
<em>Note that this value belongs to the reference variable
and not to the Object, which means it can not be referenced.</em></p>
</td></tr>
<tr valign="top"><td><code>finalize</code></td>
<td>
<p>If <code><a href="../../base/help/logical.html">TRUE</a></code>, method <code><a href="../help/finalize.Object.html">*finalize</a>()</code> will
be called on this Object when it is garbage collected.</p>
</td></tr>
</table>


<h3>Fields and Methods</h3>

<p><b>Methods:</b><br />
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>$</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>$&lt;-</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>.DollarNames</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>.subset2Internal</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>[[</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>[[&lt;-</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/as.character.Object.html">as.character</a></code> </td><td style="text-align: left;"> Gets a character string representing the object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/attach.Object.html">attach</a></code> </td><td style="text-align: left;"> Attaches an Object to the R search path.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/attachLocally.Object.html">attachLocally</a></code> </td><td style="text-align: left;"> Attaches an Object locally to an environment.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/clearCache.Object.html">clearCache</a></code> </td><td style="text-align: left;"> Clear fields that are defined to have cached values.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/clearLookupCache.Object.html">clearLookupCache</a></code> </td><td style="text-align: left;"> Clear internal fields used for faster lookup.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/clone.Object.html">clone</a></code> </td><td style="text-align: left;"> Clones an Object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/detach.Object.html">detach</a></code> </td><td style="text-align: left;"> Detach an Object from the R search path.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/equals.Object.html">equals</a></code> </td><td style="text-align: left;"> Compares an object with another.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/extend.Object.html">extend</a></code> </td><td style="text-align: left;"> Extends another class.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/finalize.Object.html">finalize</a></code> </td><td style="text-align: left;"> Finalizer methods called when object is clean out.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getEnvironment.Object.html">getEnvironment</a></code> </td><td style="text-align: left;"> Gets the environment of this object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>getFieldModifier</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getFieldModifiers.Object.html">getFieldModifiers</a></code> </td><td style="text-align: left;"> Gets all types of field modifiers.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getFields.Object.html">getFields</a></code> </td><td style="text-align: left;"> Returns the field names of an Object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getInstantiationTime.Object.html">getInstantiationTime</a></code> </td><td style="text-align: left;"> Gets the time when the object was instantiated.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getInternalAddress.Object.html">getInternalAddress</a></code> </td><td style="text-align: left;"> Gets the memory location where the Object resides.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/getStaticInstance.Object.html">getStaticInstance</a></code> </td><td style="text-align: left;"> Gets the static instance of this objects class.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/hasField.Object.html">hasField</a></code> </td><td style="text-align: left;"> Checks if a field exists or not.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/hashCode.Object.html">hashCode</a></code> </td><td style="text-align: left;"> Gets a hash code for the Object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/isReferable.Object.html">isReferable</a></code> </td><td style="text-align: left;"> Checks if the object is referable or not.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/ll.Object.html">ll</a></code> </td><td style="text-align: left;"> Generates a list of informative properties of all members of an Object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/load.Object.html">load</a></code> </td><td style="text-align: left;"> Static method to load an Object from a file or a connection.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code>names</code> </td><td style="text-align: left;">  -</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/newInstance.Object.html">newInstance</a></code> </td><td style="text-align: left;"> Creates a new instance of the same class as this object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/novirtual.Object.html">novirtual</a></code> </td><td style="text-align: left;"> Returns a reference to the same Object with virtual fields turned off.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/objectSize.Object.html">objectSize</a></code> </td><td style="text-align: left;"> Gets the size of the Object in bytes.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/print.Object.html">print</a></code> </td><td style="text-align: left;"> Prints an Object.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/save.Object.html">save</a></code> </td><td style="text-align: left;"> Saves an Object to a file or a connection.</td>
</tr>
<tr>
 <td style="text-align: right;">
 </td><td style="text-align: left;"> <code><a href="../help/staticCode.Object.html">staticCode</a></code> </td><td style="text-align: left;"> Method that will be call each time a new instance of a class is created.</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>



<h3>Defining static fields</h3>

<p>To define a static field of an Object class, use a private field
<code>&lt;.field&gt;</code> and then create a virtual field <code>&lt;field&gt;</code> by
defining methods <code>get&lt;Field&gt;()</code> and <code>set&lt;Field&gt;()</code>.
These methods should retrieve and assign the value of the field
<code>&lt;.field&gt;</code> of the <em>static</em> instance of the class.  The
second example below shows how to do this.  The example modifies
also the static field already in the constructor, which is something
that otherwise may be tricky.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>References</h3>

<p>[1] H. Bengtsson, <em>The R.oo package - Object-Oriented Programming with References Using Standard R Code</em>, In Kurt Hornik, Friedrich Leisch and Achim Zeileis, editors, Proceedings of the 3rd International Workshop on Distributed Statistical Computing (DSC 2003), March 20-22, Vienna, Austria. <a href="https://www.r-project.org/conferences/DSC-2003/Proceedings/">https://www.r-project.org/conferences/DSC-2003/Proceedings/</a>
<br />
</p>


<h3>Examples</h3>

<pre>
 
#########################################################################
# Defines the class Person with private fields .name and .age, and
# with methods print(), getName(), setName(), getAge() and setAge().
#########################################################################
setConstructorS3("Person", function(name, age) {
  if (missing(name)) name &lt;- NA
  if (missing(age))  age &lt;- NA

  extend(Object(), "Person",
    .name=name,
    .age=age
  )
})


setMethodS3("as.character", "Person", function(this, ...) {
  paste(this$.name, "is", as.integer(this$.age), "years old.")
})

setMethodS3("equals", "Person", function(this, obj, ...) {
  ( identical(data.class(this), data.class(obj)) &amp;&amp;
    identical(this$getName(), obj$getName()) &amp;&amp;
    identical(this$getAge() , obj$getAge() )    )
})

setMethodS3("hashCode", "Person", function(this, ...) {
  # Get the hashCode() of the '.name' and the '.age' fields
  # using hashCode.default().
  hashCode(this$.name) * hashCode(this$.age)
})

setMethodS3("getName", "Person", function(this, ...) {
  this$.name
})

setMethodS3("setName", "Person", function(this, newName, ...) {
  throw("It is not possible to change the name of a Person.")
})

setMethodS3("getAge", "Person", function(this, ...) {
  this$.age
})

setMethodS3("setAge", "Person", function(this, newAge, ...) {
  if (!is.numeric(newAge))
    throw("Age must be numeric: ", newAge)
  if (newAge &lt; 0)
    throw("Trying to set a negative age: ", newAge)
  this$.age &lt;- newAge
})




#########################################################################
# Code demonstrating different properties of the Object class using
# the example class Person.
#########################################################################

# Create an object (instance of) the class Person.
p1 &lt;- Person("Dalai Lama", 67)

# 'p1' is an Object of class Person.
print(data.class(p1))  # "Person"

# Prints information about the Person object.
print(p1)            # "Dalai Lama is 67 years old."

# or equivalent (except that no generic method has to exist):

p1$print()           # "Dalai Lama is 67 years old."

# Shows that no generic method is required if the \$ operator is used:
print(p1$getName())  # "Dalai Lama"

# The following will call p1$getName() since there exists a get-()
# method for the 'name' property.
print(p1$name)       # "Dalai Lama"

# and equivalent when using the [[ operator.
print(p1[["name"]])  # "Dalai Lama"

# The following shows that p1$setName(68) is called, simply because
# there exists a set-() method for the 'name' property.
p1$age &lt;- 68         # Will call p1$setAge(68)

# Shows that the age of the Person has been updated:
print(p1)            # "Dalai Lama is 68 years old."

# If there would not exists such a set-() method or field a new
# field would be created:
p1$country &lt;- "Tibet"

# Lists all (non-private) members of the Person object:
print(ll(p1))

# which gives
#      member class      mode    typeof length  dim bytes
#   1 country  NULL character character      1 NULL    44

# The following will call p1$setName("Lalai Dama") which will
# throw an exception saying one can not change the name of
# a Person.
tryCatch(p1$name &lt;- "Lalai Dama", error=print)

# The following will call p1$setAge(-4) which will throw an
# exception saying that the age must be a non-negative number.
tryCatch(p1$age &lt;- -100, error=print)

# Attaches Object 'p1' to the search path.
attach(p1)

# Accesses the newly created field 'country'.
print(country)       # "Tibet"

# Detaches Object 'p1' from the search path. Note that all
# modifications to 'country' are lost.
country &lt;- "Sweden"
detach(p1)
print(p1$country)    # "Tibet"


# Saves the Person object to a tempory file.
filename &lt;- tempfile("R.methodsS3.example")
save(p1, filename)

# Deletes the object
rm(p1)

# Loads an Object (of "unknown" class) from file using the
# static method load() of class Object.
obj &lt;- Object$load(filename)

# Prints information about the new Object.
print(obj)

# Lists all (non-private) members of the new Object.
print(ll(obj))


 
######################################################################
# Example illustrating how to "emulate" static fields using virtual
# fields, i.e. get- and set-methods.  Here we use a private static
# field '.count' of the static class instance 'MyClass', i.e.
# MyClass$.count.  Then we define a virtual field 'count' via method
# getCount() to access this static field.  This will make all queries
# for 'count' of any object to use the static field instead.  In the
# same way is assignment controlled via the setCount() method.  A
# side effect of this way of coding is that all MyClass instances will
# also have the private field '.count' (set to zero except for the
# static field that is).
######################################################################
setConstructorS3("MyClass", function(...) {
  # Create an instance (the static class instance included)
  this &lt;- extend(Object(), "MyClass",
    .count = 0
  )

  # In order for a static field to be updated in the
  # constructor it has to be done after extend().
  this$count &lt;- this$count + 1

  # Return the object
  this
})


setMethodS3("as.character", "MyClass", function(this, ...) {
  paste(class(this)[1], ": Number of instances: ", this$count, sep="")
})


# Get virtual field 'count', e.g. obj$count.
setMethodS3("getCount", "MyClass", function(this, ...) {
  MyClass$.count
})


# Set virtual field 'count', e.g. obj$count &lt;- value.
setMethodS3("setCount", "MyClass", function(this, value, ...) {
  MyClass$.count &lt;- value
})


# Create four instances of class 'MyClass'
obj &lt;- lapply(1:4, MyClass)
print(obj)
print(MyClass$count)
print(obj[[1]]$count)

stopifnot(obj[[1]]$count == length(obj))
stopifnot(MyClass$count == length(obj))

</pre>

<hr /><div style="text-align: center;">[Package <em>R.oo</em> version 1.26.0 <a href="00Index.html">Index</a>]</div>
</div></body></html>
