<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Timer Progress Bar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for timerProgressBar {pbapply}"><tr><td>timerProgressBar {pbapply}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Timer Progress Bar
</h2>

<h3>Description</h3>

<p>Text progress bar with timer in the R console.
</p>


<h3>Usage</h3>

<pre>
timerProgressBar(min = 0, max = 1, initial = 0, char = "=",
    width = NA, title, label, style = 1, file = "", min_time = 0)
getTimerProgressBar(pb)
setTimerProgressBar(pb, value, title = NULL, label = NULL)
getTimeAsString(time)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>min, max</code></td>
<td>

<p>(finite) numeric values for the extremes of the progress bar.
Must have <code>min</code> &lt; <code>max</code>.
</p>
</td></tr>
<tr valign="top"><td><code>initial, value</code></td>
<td>

<p>initial or new value for the progress bar.
See Details for what happens with invalid values.
</p>
</td></tr>
<tr valign="top"><td><code>char</code></td>
<td>

<p>he character (or character string) to form the progress bar.
If number of characters is &gt;1, it is silently stripped to length 1
unless <code>style</code> is 5 or 6 (see Details).
</p>
</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>

<p>the width of the progress bar, as a multiple of the width of char.
If <code>NA</code>, the default, the number of characters is that
which fits into <code>getOption("width")</code>.
</p>
</td></tr>
<tr valign="top"><td><code>style</code></td>
<td>

<p>the style taking values between 1 and 6.
1: progress bar with elapsed and remaining time,
remaining percentage is indicated by spaces between pipes
(default for this function),
2: throbber with elapsed and remaining time,
3: progress bar with remaining time printing elapsed time at the end,
remaining percentage is indicated by spaces between pipes
(default for <code>style</code> option in <code><a href="../../pbapply/help/pboptions.html">pboptions</a></code>),
4: throbber with remaining time printing elapsed time at the end,
5: progress bar with elapsed and remaining time
with more flexible styling (see Details and Examples),
6: progress bar with remaining time printing elapsed time at the end
with more flexible styling (see Details and Examples).
</p>
</td></tr>
<tr valign="top"><td><code>file</code></td>
<td>

<p>an open connection object or <code>""</code> which indicates the console.
</p>
</td></tr>
<tr valign="top"><td><code>min_time</code></td>
<td>

<p>numeric, minimum processing time (in seconds) required to show a progress bar.
</p>
</td></tr>
<tr valign="top"><td><code>pb</code></td>
<td>

<p>an object of class <code>"timerProgressBar"</code>.
</p>
</td></tr>
<tr valign="top"><td><code>title, label</code></td>
<td>

<p>ignored, for compatibility with other progress bars.
</p>
</td></tr>
<tr valign="top"><td><code>time</code></td>
<td>

<p>numeric of length 1, time in seconds.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>timerProgressBar</code> will display a progress bar on the R console
(or a connection) via a text representation.
</p>
<p><code>setTimerProgessBar</code> will update the value. Missing (<code>NA</code>) and out-of-range values of value will be (silently) ignored. (Such values of <code>initial</code>
cause the progress bar not to be displayed until a valid value is set.)
</p>
<p>The progress bar should be closed when finished with: this outputs the final newline character (see <code><a href="../../pbapply/help/closepb.html">closepb</a></code>).
</p>
<p>If <code>style</code> is 5 or 6, it is possible to define up to 4 characters
for the <code>char</code> argument (as a single string) for the left end,
elapsed portion, remaining portion, and right end of the progress bar
(<code>|= |</code> by default). Remaining portion cannot be the same as the
elapsed portion (space is used for remaining in such cases).
If 1 character is defined, it is taken for the elapsed portion.
If 2-4 characters are defined, those are interpreted in sequence
(left and right end being the same when 2-3 characters defined),
see Examples.
</p>
<p><code>getTimeAsString</code> converts time in seconds into ~HHh MMm SSs format
to be printed by <code>timerProgressBar</code>.
</p>


<h3>Value</h3>

<p>For <code>timerProgressBar</code> an object of class <code>"timerProgressBar"</code>
inheriting from <code>"txtProgressBar"</code>.
</p>
<p>For <code>getTimerProgressBar</code> and <code>setTimerProgressBar</code>,
a length-one numeric vector giving the previous
value (invisibly for <code>setTimerProgressBar</code>).
</p>
<p><code>getTimeAsString</code> returns time in ~HHh MMm SSs format as character.
Returns <code>"calculating"</code> when <code>time=NULL</code>.
</p>


<h3>Author(s)</h3>

<p>Zygmunt Zawadzki &lt;zawadzkizygmunt@gmail.com&gt;
</p>
<p>Peter Solymos &lt;solymos@ualberta.ca&gt;
</p>


<h3>See Also</h3>

<p>The <code>timerProgressBar</code> implementation
follows closely the code of <code><a href="../../utils/help/txtProgressBar.html">txtProgressBar</a></code>.
</p>


<h3>Examples</h3>

<pre>
## increase sluggishness to admire the progress bar longer
sluggishness &lt;- 0.02

test_fun &lt;- function(...)
{
    pb &lt;- timerProgressBar(...)
    on.exit(close(pb))
    for (i in seq(0, 1, 0.05)) {
        Sys.sleep(sluggishness)
        setTimerProgressBar(pb, i)
    }
    invisible(NULL)
}

## check the different styles
test_fun(width = 35, char = "+", style = 1)
test_fun(style = 2)
test_fun(width = 50, char = ".", style = 3)
test_fun(style = 4)
test_fun(width = 35, char = "[=-]", style = 5)
test_fun(width = 50, char = "{*.}", style = 6)

## no bar only percent and elapsed
test_fun(width = 0, char = "    ", style = 6)

## this should produce a progress bar based on min_time
(elapsed &lt;- system.time(test_fun(width = 35, min_time = 0))["elapsed"])
## this should not produce a progress bar based on min_time
system.time(test_fun(min_time = 2 * elapsed))["elapsed"]

## time formatting
getTimeAsString(NULL)
getTimeAsString(15)
getTimeAsString(65)
getTimeAsString(6005)

## example usage of getTimeAsString, use sluggishness &lt;- 1
n &lt;- 10
t0 &lt;- proc.time()[3]
ETA &lt;- NULL
for (i in seq_len(n)) {
    cat(i, "/", n, "- ETA:", getTimeAsString(ETA))
    flush.console()
    Sys.sleep(sluggishness)
    dt &lt;- proc.time()[3] - t0
    cat(" - elapsed:", getTimeAsString(dt), "\n")
    ETA &lt;- (n - i) * dt / i
}
</pre>

<hr /><div style="text-align: center;">[Package <em>pbapply</em> version 1.7-2 <a href="00Index.html">Index</a>]</div>
</div></body></html>
