<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Pyramid plot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for pyramid.plot {plotrix}"><tr><td>pyramid.plot {plotrix}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Pyramid plot</h2>

<h3>Description</h3>

<p>Displays a pyramid (opposed horizontal bar) plot on the current
graphics device.
</p>


<h3>Usage</h3>

<pre>
 pyramid.plot(lx,rx,labels=NA,top.labels=c("Male","Age","Female"),
  main="",laxlab=NULL,raxlab=NULL,unit="%",lxcol,rxcol,gap=1,space=0.2,
  ppmar=c(4,2,4,2),labelcex=1,add=FALSE,xlim,show.values=FALSE,ndig=1,
  do.first=NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>lx,rx</code></td>
<td>
<p>Vectors or a matrix or data frame (see Details) which
should be of equal length.</p>
</td></tr>
<tr valign="top"><td><code>labels</code></td>
<td>
<p>Labels for the categories represented by each pair of
bars. There should be a label for each lx or rx value, even if empty.
If <span class="samp">labels</span> is a matrix or data frame, the first two columns will
be used for the left and right category labels respectively.</p>
</td></tr> 
<tr valign="top"><td><code>top.labels</code></td>
<td>
<p>The two categories represented on the left and right
sides of the plot and a heading for the labels in the center.</p>
</td></tr>
<tr valign="top"><td><code>main</code></td>
<td>
<p>Optional title for the plot.</p>
</td></tr>
<tr valign="top"><td><code>laxlab</code></td>
<td>
<p>Optional labels for the left x axis ticks.</p>
</td></tr>
<tr valign="top"><td><code>raxlab</code></td>
<td>
<p>Optional labels for the right x axis ticks.</p>
</td></tr>
<tr valign="top"><td><code>unit</code></td>
<td>
<p>The label for the units of the plot.</p>
</td></tr>
<tr valign="top"><td><code>lxcol,rxcol</code></td>
<td>
<p>Color(s) for the left and right sets of bars. Both of
these default to <span class="samp">rainbow(length(labels))</span>.</p>
</td></tr>
<tr valign="top"><td><code>gap</code></td>
<td>
<p>One half of the space between the two sets of bars for the
<span class="samp">labels</span> in user units.</p>
</td></tr>
<tr valign="top"><td><code>space</code></td>
<td>
<p>Space between the bars. Should be 0 &lt;= space &lt; 1.</p>
</td></tr>
<tr valign="top"><td><code>ppmar</code></td>
<td>
<p>Margins for the plot (see Details).</p>
</td></tr>
<tr valign="top"><td><code>labelcex</code></td>
<td>
<p>Expansion for the category labels.</p>
</td></tr>
<tr valign="top"><td><code>add</code></td>
<td>
<p>Whether to add bars to an existing plot. Usually this
involves overplotting a second set of bars, perhaps transparent.</p>
</td></tr>
<tr valign="top"><td><code>xlim</code></td>
<td>
<p>Optional x limit for the plot (see Details).</p>
</td></tr>
<tr valign="top"><td><code>show.values</code></td>
<td>
<p>Whether to display <span class="samp">lx</span> and <span class="samp">rx</span> at the
ends of the bars.</p>
</td></tr>
<tr valign="top"><td><code>ndig</code></td>
<td>
<p>The number of digits to round the values if displayed.</p>
</td></tr>
<tr valign="top"><td><code>do.first</code></td>
<td>
<p>Optional expression to evaluate before displaying anything.</p>
</td></tr> 
</table>


<h3>Details</h3>

<p><span class="samp">pyramid.plot</span> is principally intended for population pyramids,
although it can display other types of opposed bar charts with suitable
modification of the arguments. If the user wants a different unit for
the display, just change <span class="samp">unit</span> accordingly. The default gap of 
two units is usually satisfactory for the four to six percent range 
of most bars on population pyramids. If <span class="samp">labels</span> is a matrix or
data frame of at least two columns, the first column will be displayed
on the on the left side of the gap in the center, and the second on the
right. This will almost always require increasing the gap width and
perhaps also specifying a wider plotting device. Displaying the values
will usually require increasing the left and/or right margins of the
plot, or setting <span class="samp">xlim</span> larger than the largest value.
</p>
<p>If a gap width of zero is passed, the category labels will be displayed
at the left and right extents of the plot. This usually requires setting
<span class="samp">xlim</span> to values larger than the maximum extent of <span class="samp">lx</span> and
<span class="samp">rx</span>. The user can pass two different values to <span class="samp">xlim</span>, but
this is almost always a bad idea, as the lengths of the bars will not
be in the same proportion to the values on the left and right sides.
Both the bars and category labels are vertically centered on integer
values, allowing the user to easily add components to the plot.
</p>
<p><span class="samp">lx</span> and <span class="samp">rx</span> are the values specifying the left and right
extents of the left and right bars respectively. If both are matrices
or data frames, <span class="samp">pyramid.plot</span> will produce opposed stacked bars
with the first columns innermost. In this mode, colors are limited to
one per column. The stacked bar mode will in general not work with the
<span class="samp">add</span> method or with a gap of zero. Note that the stacked bar
mode can get very messy very quickly.
</p>
<p>The <span class="samp">add</span> argument allows one or more sets of bars to be plotted
on an existing plot. If these are not transparent, any bar that is
shorter than the bar that overplots it will disappear. Only some graphic
devices (e.g. <span class="samp">pdf</span>) will handle transparency.
</p>
<p>In order to add bars, the function cannot restore the initial margin values
or the new bars will not plot properly. To automatically restore the plot
margins, call the function as in the example.
</p>


<h3>Value</h3>

<p>The return value of <span class="samp">par("mar")</span> when the function was called.
</p>


<h3>Author(s)</h3>

<p>Jim Lemon (thanks to Susumu Tanimura for the patch that omits
ticks for NA values in vector input and Igor Rebeiro for the space
argument)</p>


<h3>See Also</h3>

<p><a href="../../graphics/html/rect.html">rect</a></p>


<h3>Examples</h3>

<pre>
 xy.pop&lt;-c(3.2,3.5,3.6,3.6,3.5,3.5,3.9,3.7,3.9,3.5,3.2,2.8,2.2,1.8,
  1.5,1.3,0.7,0.4)
 xx.pop&lt;-c(3.2,3.4,3.5,3.5,3.5,3.7,4,3.8,3.9,3.6,3.2,2.5,2,1.7,1.5,
  1.3,1,0.8)
 agelabels&lt;-c("0-4","5-9","10-14","15-19","20-24","25-29","30-34",
  "35-39","40-44","45-49","50-54","55-59","60-64","65-69","70-74",
  "75-79","80-44","85+")
 mcol&lt;-color.gradient(c(0,0,0.5,1),c(0,0,0.5,1),c(1,1,0.5,1),18)
 fcol&lt;-color.gradient(c(1,1,0.5,1),c(0.5,0.5,0.5,1),c(0.5,0.5,0.5,1),18)
 par(mar=pyramid.plot(xy.pop,xx.pop,labels=agelabels,
  main="Australian population pyramid 2002",lxcol=mcol,rxcol=fcol,
  gap=0.5,show.values=TRUE))
 # three column matrices
 avtemp&lt;-c(seq(11,2,by=-1),rep(2:6,each=2),seq(11,2,by=-1))
 malecook&lt;-matrix(avtemp+sample(-2:2,30,TRUE),ncol=3)
 femalecook&lt;-matrix(avtemp+sample(-2:2,30,TRUE),ncol=3)
 # group by age
 agegrps&lt;-c("0-10","11-20","21-30","31-40","41-50","51-60",
  "61-70","71-80","81-90","91+")
 oldmar&lt;-pyramid.plot(malecook,femalecook,labels=agegrps,
  unit="Bowls per month",lxcol=c("#ff0000","#eeee88","#0000ff"),
  rxcol=c("#ff0000","#eeee88","#0000ff"),laxlab=c(0,10,20,30),
  raxlab=c(0,10,20,30),top.labels=c("Males","Age","Females"),gap=4,
  do.first="plot_bg(\"#eedd55\")")
 # put a box around it
 box()
 # give it a title
 mtext("Porridge temperature by age and sex of bear",3,2,cex=1.5)
 # stick in a legend
 legend(par("usr")[1],11,c("Too hot","Just right","Too cold"),
  fill=c("#ff0000","#eeee88","#0000ff"))
 # don't forget to restore the margins and background
 par(mar=oldmar,bg="transparent")
</pre>

<hr /><div style="text-align: center;">[Package <em>plotrix</em> version 3.8-2 <a href="00Index.html">Index</a>]</div>
</div></body></html>
