<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Use DRAC to calculate dose rate data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for use_DRAC {Luminescence}"><tr><td>use_DRAC {Luminescence}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Use DRAC to calculate dose rate data</h2>

<h3>Description</h3>

<p>The function provides an interface from R to DRAC. An R-object or a
pre-formatted XLS/XLSX file is passed to the DRAC website and the
results are re-imported into R.
</p>


<h3>Usage</h3>

<pre>
use_DRAC(file, name, print_references = TRUE, citation_style = "text", ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>file</code></td>
<td>
<p><a href="../../base/html/character.html">character</a> (<strong>required</strong>):
spreadsheet to be passed to the DRAC website for calculation. Can also be a
DRAC template object obtained from <code>template_DRAC()</code>.</p>
</td></tr>
<tr valign="top"><td><code>name</code></td>
<td>
<p><a href="../../base/html/character.html">character</a> (<em>with default</em>):
Optional user name submitted to DRAC. If omitted, a random name will be generated</p>
</td></tr>
<tr valign="top"><td><code>print_references</code></td>
<td>
<p>(<em>with default</em>):
Print all references used in the input data table to the console.</p>
</td></tr>
<tr valign="top"><td><code>citation_style</code></td>
<td>
<p>(<em>with default</em>):
If <code>print_references = TRUE</code> this argument determines the output style of the
used references. Valid options are <code>"Bibtex"</code>, <code>"citation"</code>, <code>"html"</code>, <code>"latex"</code>
or <code>"R"</code>. Default is <code>"text"</code>.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Further arguments.
</p>

<ul>
<li> <p><code>url</code> <a href="../../base/html/character.html">character</a>: provide an alternative URL to DRAC
</p>
</li>
<li> <p><code>verbose</code> <a href="../../base/html/logical.html">logical</a>: show or hide console output
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an <a href="../../Luminescence/help/RLum.Results-class.html">RLum.Results</a> object containing the following elements:
</p>
<table summary="R valueblock">
<tr valign="top"><td><code>DRAC</code></td>
<td>
<p><a href="../../base/html/list.html">list</a>: a named list containing the following elements in slot <code style="white-space: pre;">@data</code>:
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$highlights</code> </td><td style="text-align: left;"> <a href="../../base/html/data.frame.html">data.frame</a> </td><td style="text-align: left;"> summary of 25 most important input/output fields </td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$header</code> </td><td style="text-align: left;"> <a href="../../base/html/character.html">character</a> </td><td style="text-align: left;"> HTTP header from the DRAC server response </td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$labels</code> </td><td style="text-align: left;"> <a href="../../base/html/data.frame.html">data.frame</a> </td><td style="text-align: left;"> descriptive headers of all input/output fields </td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$content</code> </td><td style="text-align: left;"> <a href="../../base/html/data.frame.html">data.frame</a> </td><td style="text-align: left;"> complete DRAC input/output table </td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$input</code> </td><td style="text-align: left;"> <a href="../../base/html/data.frame.html">data.frame</a> </td><td style="text-align: left;"> DRAC input table </td>
</tr>
<tr>
 <td style="text-align: left;">
<code style="white-space: pre;">$output</code> </td><td style="text-align: left;"> <a href="../../base/html/data.frame.html">data.frame</a> </td><td style="text-align: left;"> DRAC output table </td>
</tr>
<tr>
 <td style="text-align: left;">
<code>references</code></td><td style="text-align: left;"> <a href="../../base/html/list.html">list</a> </td><td style="text-align: left;"> A list of bib entries of used references </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p><a href="../../base/html/character.html">character</a> or <a href="../../base/html/list.html">list</a> path to the input spreadsheet or a DRAC template</p>
</td></tr>
<tr valign="top"><td><code>call</code></td>
<td>
<p><a href="../../base/html/call.html">call</a> the function call</p>
</td></tr>
<tr valign="top"><td><code>args</code></td>
<td>
<p><a href="../../base/html/list.html">list</a> used arguments</p>
</td></tr>
</table>
<p>The output should be accessed using the function <a href="../../Luminescence/help/get_RLum.html">get_RLum</a>.
</p>


<h3>Function version</h3>

<p>0.1.3
</p>


<h3>How to cite</h3>

<p>Kreutzer, S., Dietze, M., Burow, C., 2021. use_DRAC(): Use DRAC to calculate dose rate data. Function version 0.1.3. In: Kreutzer, S., Burow, C., Dietze, M., Fuchs, M.C., Schmidt, C., Fischer, M., Friedrich, J., Mercier, N., Philippe, A., Riedesel, S., Autzen, M., Mittelstrass, D., Gray, H.J., 2021. Luminescence: Comprehensive Luminescence Dating Data Analysis. R package version 0.9.15. https://CRAN.R-project.org/package=Luminescence
</p>


<h3>Author(s)</h3>

<p>Sebastian Kreutzer, Geography &amp; Earth Sciences, Aberystwyth University (United Kingdom)<br />
Michael Dietze, GFZ Potsdam (Germany)<br />
Christoph Burow, University of Cologne (Germany)
, RLum Developer Team</p>


<h3>References</h3>

<p>Durcan, J.A., King, G.E., Duller, G.A.T., 2015. DRAC: Dose Rate and Age Calculator for trapped charge dating.
Quaternary Geochronology 28, 54-61. doi:10.1016/j.quageo.2015.03.012
</p>


<h3>Examples</h3>

<pre>

## (1) Method using the DRAC spreadsheet

file &lt;-  "/PATH/TO/DRAC_Input_Template.csv"

# send the actual IO template spreadsheet to DRAC
## Not run: 
use_DRAC(file = file)

## End(Not run)



## (2) Method using an R template object

# Create a template
input &lt;- template_DRAC(preset = "DRAC-example_quartz")

# Fill the template with values
input$`Project ID` &lt;- "DRAC-Example"
input$`Sample ID` &lt;- "Quartz"
input$`Conversion factors` &lt;- "AdamiecAitken1998"
input$`External U (ppm)` &lt;- 3.4
input$`errExternal U (ppm)` &lt;- 0.51
input$`External Th (ppm)` &lt;- 14.47
input$`errExternal Th (ppm)` &lt;- 1.69
input$`External K (%)` &lt;- 1.2
input$`errExternal K (%)` &lt;- 0.14
input$`Calculate external Rb from K conc?` &lt;- "N"
input$`Calculate internal Rb from K conc?` &lt;- "N"
input$`Scale gammadoserate at shallow depths?` &lt;- "N"
input$`Grain size min (microns)` &lt;- 90
input$`Grain size max (microns)` &lt;- 125
input$`Water content ((wet weight - dry weight)/dry weight) %` &lt;- 5
input$`errWater content %` &lt;- 2
input$`Depth (m)` &lt;- 2.2
input$`errDepth (m)` &lt;- 0.22
input$`Overburden density (g cm-3)` &lt;- 1.8
input$`errOverburden density (g cm-3)` &lt;- 0.1
input$`Latitude (decimal degrees)` &lt;- 30.0000
input$`Longitude (decimal degrees)` &lt;- 70.0000
input$`Altitude (m)` &lt;- 150
input$`De (Gy)` &lt;- 20
input$`errDe (Gy)` &lt;- 0.2

# use DRAC
## Not run: 
output &lt;- use_DRAC(input)

## End(Not run)

</pre>

<hr /><div style="text-align: center;">[Package <em>Luminescence</em> version 0.9.15 <a href="00Index.html">Index</a>]</div>
</div></body></html>
